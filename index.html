<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… - Ø¯. Ù…Ø­Ù…Ø¯ ÙØ§Ø±Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --green: #1B4332; --black: #121212; --white: #FFFFFF; }
        body { font-family: 'Tajawal', sans-serif; background: var(--black); color: var(--white); margin: 0; padding: 15px; }
        .app-container { max-width: 700px; margin: auto; }
        .header { text-align: center; padding: 20px; border-bottom: 2px solid var(--gold); margin-bottom: 20px; }
        .card { background: var(--white); color: #333; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        select, textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; font-family: 'Tajawal'; font-size: 1rem; margin-bottom: 15px; box-sizing: border-box; }
        .btn-main { background: var(--green); color: white; border: none; width: 100%; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }
        .btn-main:disabled { background: #666; }
        .output-area { margin-top: 25px; display: none; background: #fff; color: #222; padding: 25px; border-radius: 10px; border-right: 8px solid var(--gold); line-height: 1.8; text-align: right; }
        .error { color: #ff4d4d; background: #fff1f1; padding: 10px; border-radius: 8px; margin-top: 10px; display: none; font-size: 0.9rem; }
        .badge { display: inline-block; padding: 5px 10px; background: var(--gold); color: black; border-radius: 5px; font-size: 0.8rem; margin-bottom: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <h1 style="font-family: 'Amiri'; color: var(--gold); margin: 0;">Ø¯. Ù…Ø­Ù…Ø¯ ÙØ§Ø±Ø­</h1>
        <p style="margin: 5px 0; opacity: 0.8;">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù… (Gemini 2.0)</p>
    </div>

    <div class="card">
        <label>Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</label>
        <select id="actionMode">
            <option value="draft">ğŸ–‹ï¸ ØµÙŠØ§ØºØ© Ø®Ø·Ø§Ø¨ Ø±Ø³Ù…ÙŠ Ù…Ø­ÙƒÙ…</option>
            <option value="summarize">ğŸ“‹ ØªÙ„Ø®ÙŠØµ Ù…Ø±Ø§Ø³Ù„Ø§Øª Ø£Ùˆ Ù…Ø­Ø§Ø¶Ø±</option>
            <option value="consult">ğŸ’¡ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© ÙˆØ£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</option>
            <option value="tasks">âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØ¶Ø¨Ø· Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† Ù†Øµ</option>
        </select>

        <label>Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Øµ Ø£Ùˆ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:</label>
        <textarea id="userInput" rows="6" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù‡Ù†Ø§..."></textarea>
        
        <button id="execBtn" class="btn-main" onclick="executeAI()">ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø¢Ù†</button>
        <div id="errDiv" class="error"></div>
    </div>

    <div id="resDiv" class="output-area"></div>
</div>

<script>
    const API_KEY = "AIzaSyCRWq1Mw41Ls8jV1aXqoKHN1oFaNkGpVQ8"; 
    const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";

    async function executeAI() {
        const mode = document.getElementById('actionMode').value;
        const input = document.getElementById('userInput').value;
        const resDiv = document.getElementById('resDiv');
        const errDiv = document.getElementById('errDiv');
        const btn = document.getElementById('execBtn');

        if(!input) return;

        btn.disabled = true;
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø°ÙƒÙŠØ©... âœ¨";
        errDiv.style.display = "none";
        resDiv.style.display = "none";

        // ØªØ®ØµÙŠØµ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø®ØªØ§Ø±
        let systemPrompt = "";
        if(mode === 'draft') systemPrompt = "Ø£Ù†Øª Ø®Ø¨ÙŠØ± ØµÙŠØ§ØºØ© Ø¥Ø¯Ø§Ø±ÙŠØ©. Ø§ÙƒØªØ¨ Ø®Ø·Ø§Ø¨Ø§Ù‹ Ø±Ø³Ù…ÙŠØ§Ù‹ Ø¨Ù„ÙŠØºØ§Ù‹ Ø¬Ø¯Ø§Ù‹ Ø¨Ù„Ø³Ø§Ù† Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù… Ø­ÙˆÙ„: ";
        if(mode === 'summarize') systemPrompt = "Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø¥Ø¯Ø§Ø±ÙŠ Ø¯Ù‚ÙŠÙ‚. Ù„Ø®Øµ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ ÙÙŠ Ù†Ù‚Ø§Ø· Ù…Ø±ÙƒØ²Ø© Ù…Ø¹ Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ®Ø°Ø©: ";
        if(mode === 'consult') systemPrompt = "Ø£Ù†Øª Ù…Ø³ØªØ´Ø§Ø± Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ. Ù‚Ø¯Ù… Ù†ØµÙŠØ­Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© Ø£Ùˆ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ø±Ø§Ù Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©) Ø¨Ø®ØµÙˆØµ: ";
        if(mode === 'tasks') systemPrompt = "Ø­Ù„Ù„ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ§Ø³ØªØ®Ø±Ø¬ Ù…Ù†Ù‡ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… Ù…Ø­Ø¯Ø¯Ø© (To-Do List) Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª Ø¥Ù† ÙˆØ¬Ø¯Øª: ";

        try {
            const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: systemPrompt + input }] }]
                })
            });

            const data = await response.json();

            if (data.error) {
                if(data.error.status === "RESOURCE_EXHAUSTED") throw new Error("Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ø´ØºÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚Ø©.");
                throw new Error(data.error.message);
            }

            if (data.candidates) {
                let aiText = data.candidates[0].content.parts[0].text;
                resDiv.innerHTML = `<div class='badge'>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</div><br>` + aiText.replace(/\n/g, "<br>");
                resDiv.style.display = "block";
            }
        } catch (e) {
            errDiv.innerText = e.message;
            errDiv.style.display = "block";
        } finally {
            btn.disabled = false;
            btn.innerText = "ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø¢Ù†";
        }
    }
</script>

</body>
</html>

